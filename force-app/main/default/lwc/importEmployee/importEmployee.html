<template>
    <c-file-upload-spinner show-spinner={isSpinner} is-not-custom-setting-message={isNotCustomSettingMessage} file-message-url={loadingMessage}></c-file-upload-spinner>
    <div class="file-upload-container" ondragover={handleDragOver} ondrop={handleFileDrop}>
        <div class="upload-container">
            <div class="step-wrapper">
                <h2 class="stepsHeader" style="font-size: 2em;">Instruction & Tips</h2>
                <p class="step"><strong>Step 1.</strong> Download the template <a href={sample_csv_url} class="somple-href" > here </a> </p>
                <p class="step"><strong>Step 2.</strong> Make sure the data is complete and accurate</p>
                <div class="help-text-container">
                    <p class="step info-slider" ><strong>Step 3.</strong> The formatting is important! Please see these pro-tips</p>
                    <span onclick={handleIcon}>
                        <svg height="30"   width="30"  viewBox="8 -2 20 50" xmlns="http://www.w3.org/2000/svg">
                            <use xlink:href={importIconUrl}></use>
                        </svg>
                    </span>
                    <div class="help-text">
                        <c-help-text carousel={styleOfCarousel} onclosetext={handleSliderClose} header={styleHeader} body={styleBody} title-name={title}
                        footer={styleFooter} content={carouselContent} ></c-help-text>
                    </div>
                </div>
            </div>
            <div class="file-upload-border">
                <div class="upload-icon">
                    <template lwc:if={isFileSelected}>
                            <svg  xmlns="http://www.w3.org/2000/svg" width="63" height="63" viewBox="0 0 63 63" fill="none">
                                <path  d="M54.575 17.818c-0.009 -0.037 -0.022 -0.071 -0.03 -0.104 -0.013 -0.041 -0.022 -0.08 -0.038 -0.123 -0.016 -0.041 -0.041 -0.077 -0.063 -0.117 -0.016 -0.03 -0.029 -0.063 -0.05 -0.092a1.26 1.26 0 0 0 -0.152 -0.188L41.571 4.558a1.181 1.181 0 0 0 -0.188 -0.152c-0.029 -0.022 -0.062 -0.034 -0.09 -0.05 -0.039 -0.022 -0.077 -0.047 -0.121 -0.063 -0.038 -0.016 -0.079 -0.025 -0.123 -0.038 -0.037 -0.01 -0.071 -0.024 -0.104 -0.029a1.226 1.226 0 0 0 -0.236 -0.025H10.844a2.441 2.441 0 0 0 -2.443 2.436v49.541a2.44 2.44 0 0 0 2.442 2.435h41.315a2.441 2.441 0 0 0 2.442 -2.435V18.058a1.263 1.263 0 0 0 -0.024 -0.239ZM40.709 7.141l10.941 10.921h-10.945V7.141Zm11.45 49.037H10.844V6.639h27.422v11.419a2.44 2.44 0 0 0 2.442 2.435h11.45v35.681Z" fill="#7ABB4A"></path>
                                <path  d="M54.575 17.818c-0.009 -0.037 -0.022 -0.071 -0.03 -0.104 -0.013 -0.041 -0.022 -0.08 -0.038 -0.123 -0.016 -0.041 -0.041 -0.077 -0.063 -0.117 -0.016 -0.03 -0.029 -0.063 -0.05 -0.092a1.26 1.26 0 0 0 -0.152 -0.188L41.571 4.558a1.181 1.181 0 0 0 -0.188 -0.152c-0.029 -0.022 -0.062 -0.034 -0.09 -0.05 -0.039 -0.022 -0.077 -0.047 -0.121 -0.063 -0.038 -0.016 -0.079 -0.025 -0.123 -0.038 -0.037 -0.01 -0.071 -0.024 -0.104 -0.029a1.226 1.226 0 0 0 -0.236 -0.025H10.844a2.441 2.441 0 0 0 -2.443 2.436v49.541a2.44 2.44 0 0 0 2.442 2.435h41.315a2.441 2.441 0 0 0 2.442 -2.435V18.058a1.263 1.263 0 0 0 -0.024 -0.239ZM40.709 7.141l10.941 10.921h-10.945V7.141Zm11.45 49.037H10.844V6.639h27.422v11.419a2.44 2.44 0 0 0 2.442 2.435h11.45v35.681Z" fill="#7ABB4A"></path>
                                <path  d="m29.686 36.734 -4.964 -5.032a1.214 1.214 0 0 0 -1.742 0 1.273 1.273 0 0 0 0 1.773l5.838 5.927a1.214 1.214 0 0 0 1.742 0l0.003 -0.003 10.483 -11.655a1.273 1.273 0 0 0 -0.002 -1.769 1.214 1.214 0 0 0 -1.742 0l-0.008 0.003 -9.612 10.758Z" fill="#7ABB4A" stroke="#7ABB4A" stroke-width="0.3080007"></path>
                            </svg>
                    </template>
                    <template lwc:else>
                        <svg  xmlns="http://www.w3.org/2000/svg" width="63" height="63" viewBox="0 0 63 63" fill="none">
                            <path  d="M54.576 17.818c-0.009 -0.035 -0.021 -0.068 -0.031 -0.105 -0.013 -0.042 -0.021 -0.081 -0.037 -0.122 -0.017 -0.042 -0.042 -0.078 -0.063 -0.117 -0.017 -0.031 -0.03 -0.063 -0.05 -0.093a1.26 1.26 0 0 0 -0.154 -0.187L41.571 4.559a1.18 1.18 0 0 0 -0.187 -0.154c-0.03 -0.021 -0.061 -0.033 -0.091 -0.05 -0.04 -0.021 -0.078 -0.046 -0.119 -0.063 -0.037 -0.017 -0.08 -0.026 -0.122 -0.037 -0.035 -0.011 -0.068 -0.023 -0.105 -0.03a1.227 1.227 0 0 0 -0.24 -0.025H10.843a2.44 2.44 0 0 0 -2.443 2.435v49.541a2.442 2.442 0 0 0 2.442 2.436h41.315a2.442 2.442 0 0 0 2.443 -2.435V18.058a1.264 1.264 0 0 0 -0.023 -0.239ZM40.709 7.14l10.944 10.921H40.71V7.14Zm11.449 49.037H10.843V6.638h27.423v11.42a2.44 2.44 0 0 0 2.442 2.436h11.449v35.682Z" fill="#7ABB4A"></path>
                            <path  d="M19.107 41.817c0 0.672 0.546 1.218 1.22 1.218h21.525a1.218 1.218 0 1 0 0 -2.436H20.328a1.218 1.218 0 0 0 -1.22 1.218Z" fill="#7ABB4A"></path>
                            <path  d="M23.382 32.298a1.218 1.218 0 0 0 0.828 -0.319l5.661 -5.199v11.382a1.218 1.218 0 0 0 2.442 0V26.78l5.659 5.197a1.218 1.218 0 0 0 1.729 -0.072 1.218 1.218 0 0 0 -0.074 -1.722l-7.707 -7.078 -0.052 -0.04 -0.08 -0.063 -0.042 -0.028a0.536 0.536 0 0 0 -0.08 -0.042 0.664 0.664 0 0 0 -0.084 -0.046c-0.015 -0.009 -0.031 -0.013 -0.046 -0.017a0.648 0.648 0 0 0 -0.091 -0.03c-0.03 -0.009 -0.059 -0.021 -0.091 -0.028l-0.048 -0.009 -0.091 -0.011a0.746 0.746 0 0 0 -0.1 -0.009l-0.023 -0.002h-0.026l-0.084 0.009 -0.106 0.013 -0.048 0.011c-0.028 0.004 -0.05 0.013 -0.078 0.021l-0.1 0.033 -0.046 0.017c-0.026 0.011 -0.05 0.028 -0.076 0.04a0.894 0.894 0 0 0 -0.091 0.05l-0.042 0.026 -0.072 0.059c-0.018 0.017 -0.04 0.028 -0.056 0.043l-7.712 7.082a1.215 1.215 0 0 0 0.828 2.114Z" fill="#7ABB4A"></path>
                        </svg>
                    </template>
                    
                </div>
                <div class="upload-label">
                    <template lwc:if={isFileSelected}>
                        <button class="slds-btn slds-btn-primary slds-btn-md waves-effect bc-green waves-light" onclick={handleUploadFile}>
                            Upload
                        </button>
                    </template>
                    <template lwc:else>
                        <button class="slds-btn slds-btn-primary slds-btn-md waves-effect bc-green waves-light" onclick={handleChooseFile}>
                            Choose File to upload
                        </button>
                    </template>
                    <p class="file-message">{fileName} {fileSize}</p>
                    <p>or drag and drop files here</p>
                </div>
                <input type="file" accept=".xlsx, .xls, .csv" class="file-input" onchange={handleFileSelect} />
            </div>
        </div>
    </div>
</template>